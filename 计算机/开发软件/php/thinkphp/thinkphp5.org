* 图片水印平铺效果

  #+begin_src php

            use think\Image;

        class PIC{
        public function test(){

        $image = Image::open('bg.jpg');
     // 给原图设置水印图片（colleced.png）并保存water_image.png

    $image->tilewater('colleced.png',100)->save('water_image.png');
echo "<img src='/water_image.png' />";

        }
        }
  #+end_src
  

  #+begin_src php
                   // 添加图片水印平铺
                   // $source 水印图片路径
                   //int     $alpha  透明度


               public function tilewater($source, $alpha = 100){
                if (!is_file($source)){
                throw new InageException('水印图像不存在');
                }

           // 获取水印图像信息 
            $info = getimagesize($source);
        if($false === $info || (IMAGETYPE_GIF === $info[2] && empty($info['bits']))){
        throw new ImageException('非法水印文件');
    }

    //设定水印图像的混色模式
    imagealphablending($water,true);

               }

  #+end_src
